<script type="importmap">
  {
    "imports": {
      "lit": "https://esm.sh/lit@^3.3.0",
      "lit/": "https://esm.sh/lit@^3.3.0/",
      "@lit/context": "https://esm.sh/@lit/context@^1.1.5",
      "@google/genai": "https://esm.sh/@google/genai@^0.9.0",
      "three": "https://esm.sh/three@^0.176.0",
      "three/": "https://esm.sh/three@^0.176.0/"
    }
  }
</script>
<!-- Live2D Cubism Core will be downloaded by the Vite plugin into public; we keep a fallback script include if needed -->
<script src="/assets/js/CubismSdkForWeb-5-r.3/Core/live2dcubismcore.min.js"></script>
<body onload="(function(){
    try {
      let theme = localStorage.getItem('theme');
      if (!theme) {
        // Define available themes
        const darkThemes = ['dystopia', 'tron', 'synthwave', 'matrix', 'noir'];
        const lightThemes = ['cyberpunk'];

        // Check user's system preference
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        // Select a random theme based on preference
        if (prefersDark) {
          theme = darkThemes[Math.floor(Math.random() * darkThemes.length)];
        } else {
          theme = lightThemes[Math.floor(Math.random() * lightThemes.length)];
        }
        localStorage.setItem('theme', theme);
      }
      document.documentElement.setAttribute('data-theme', theme);
    } catch (e) {
      console.error('Failed to set theme:', e);
    }
  })()">
  <gdm-live-audio></gdm-live-audio>
<script type="module" src="/index.tsx"></script>
</body>
<link rel="stylesheet" href="/index.css">
